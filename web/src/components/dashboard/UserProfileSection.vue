<template>
  <div class="streamlit-section">
    <h2 class="streamlit-subheader">ğŸ‘¤ ç”¨æˆ·é…ç½®</h2>
    <div class="streamlit-selectbox">
      <label>é€‰æ‹©ç”¨æˆ·é…ç½®ï¼š</label>
      <select
        v-model="selectedProfileName"
        @change="handleProfileChange"
        :disabled="isLoading"
        class="streamlit-select"
      >
        <option value="è‡ªå®šä¹‰">è‡ªå®šä¹‰</option>
        <option v-for="profile in userProfiles" :key="profile.username" :value="profile.username">
          {{ profile.username }}
        </option>
      </select>
    </div>

    <!-- ç”¨æˆ·é…ç½®æˆåŠŸä¿¡æ¯ -->
    <div v-if="selectedProfile && selectedProfileName !== 'è‡ªå®šä¹‰'" class="streamlit-success">
      <div class="success-content">
        <strong>âœ… å·²åŠ è½½ç”¨æˆ· {{ selectedProfileName }} çš„é…ç½®</strong>
        <br /><br />
        <strong>åˆ†ç±»æ ‡ç­¾</strong>: <code>{{ selectedProfile.category_id || "æœªè®¾ç½®" }}</code>
        <br /><br />
        <strong>ç ”ç©¶å…´è¶£</strong>:
        <pre class="research-interests-code">{{ selectedProfile.user_input || "æœªè®¾ç½®" }}</pre>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { useProfile } from "@/composables/useProfile";

const { selectedProfileName, userProfiles, selectedProfile, isLoading, handleProfileChange } =
  useProfile();
</script>

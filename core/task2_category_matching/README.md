# å¤šç”¨æˆ·ArXivåˆ†ç±»åŒ¹é…å™¨ - JSONè¾“å‡ºåŠŸèƒ½

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

æœ¬åŠŸèƒ½æ‰©å±•äº†åŸæœ‰çš„ArXivåˆ†ç±»åŒ¹é…å™¨ï¼Œæ”¯æŒå¤šç”¨æˆ·æ•°æ®å­˜å‚¨å’ŒJSONæ ¼å¼è¾“å‡ºã€‚ç³»ç»Ÿèƒ½å¤Ÿå¤„ç†å¤šä¸ªç”¨æˆ·çš„ç ”ç©¶æ–¹å‘æè¿°ï¼Œé€šè¿‡LLMè¯„ä¼°åŒ¹é…åº¦ï¼Œå¹¶å°†ç»“æœä¿å­˜ä¸ºç»“æ„åŒ–çš„JSONæ–‡ä»¶ã€‚

## ğŸ†• æ–°å¢åŠŸèƒ½

### 1. MultiUserDataManager ç±»

- **å¤šç”¨æˆ·æ•°æ®ç®¡ç†**ï¼šæ”¯æŒå­˜å‚¨å¤šä¸ªç”¨æˆ·çš„åˆ†ç±»åŒ¹é…ç»“æœ
- **JSONæ ¼å¼è¾“å‡º**ï¼šå°†ç»“æœä¿å­˜ä¸ºç»“æ„åŒ–çš„JSONæ–‡ä»¶
- **æ•°æ®æŒä¹…åŒ–**ï¼šæ”¯æŒä»ç°æœ‰JSONæ–‡ä»¶åŠ è½½æ•°æ®
- **æ—¶é—´æˆ³è®°å½•**ï¼šæ¯æ¡è®°å½•åŒ…å«åˆ›å»ºæ—¶é—´

### 2. å¢å¼ºçš„CategoryMatcher

- **Tokenç»Ÿè®¡**ï¼šè®°å½•æ¯æ¬¡LLMè°ƒç”¨çš„tokenä½¿ç”¨é‡
- **è´¹ç”¨è®¡ç®—**ï¼šåŸºäºé€šä¹‰åƒé—®Pluså®šä»·è®¡ç®—APIè°ƒç”¨è´¹ç”¨
- **æ‰¹é‡å¤„ç†**ï¼šæ”¯æŒå¤„ç†å¤šä¸ªç”¨æˆ·çš„å¤šä¸ªç ”ç©¶æ–¹å‘

## ğŸ“Š JSONè¾“å‡ºæ ¼å¼

ç”Ÿæˆçš„JSONæ–‡ä»¶åŒ…å«ä»¥ä¸‹ç»“æ„ï¼š

```json
{
  "metadata": {
    "total_records": 20,
    "generated_at": "2025-08-10T13:51:31.850464",
    "description": "å¤šç”¨æˆ·ArXivåˆ†ç±»åŒ¹é…ç»“æœ"
  },
  "users": [
    {
      "username": "ç”¨æˆ·å",
      "category_id": "åˆ†ç±»ID",
      "user_input": "ç”¨æˆ·è¾“å…¥çš„ç ”ç©¶æ–¹å‘æè¿°",
      "score": åŒ¹é…è¯„åˆ†(0-100),
      "timestamp": "è®°å½•åˆ›å»ºæ—¶é—´"
    }
  ]
}
```

### å­—æ®µè¯´æ˜

- **metadata**: å…ƒæ•°æ®ä¿¡æ¯
  - `total_records`: æ€»è®°å½•æ•°
  - `generated_at`: æ–‡ä»¶ç”Ÿæˆæ—¶é—´
  - `description`: æ–‡ä»¶æè¿°

- **users**: ç”¨æˆ·æ•°æ®æ•°ç»„
  - `username`: ç”¨æˆ·åï¼ˆæ”¯æŒé‡å¤ï¼Œè¡¨ç¤ºåŒä¸€ç”¨æˆ·çš„ä¸åŒç ”ç©¶æ–¹å‘ï¼‰
  - `category_id`: ArXivåˆ†ç±»ID
  - `user_input`: ç”¨æˆ·è¾“å…¥çš„ç ”ç©¶æ–¹å‘æè¿°
  - `score`: LLMè¯„ä¼°çš„åŒ¹é…åº¦è¯„åˆ†ï¼ˆ0-100ï¼‰
  - `timestamp`: è®°å½•åˆ›å»ºçš„æ—¶é—´æˆ³

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1ï¼šè¿è¡Œä¸»ç¨‹åº

```bash
cd c:\Users\admin\Desktop\arxiv_recommender_v2\task1
python category_matcher.py
```

è¿™å°†å¤„ç†é¢„è®¾çš„ç¤ºä¾‹ç”¨æˆ·æ•°æ®å¹¶ç”Ÿæˆ `user_categories.json` æ–‡ä»¶ã€‚

### æ–¹æ³•2ï¼šè¿è¡Œæ¼”ç¤ºç¨‹åº

```bash
python multi_user_demo.py
```

è¿™å°†è¿è¡Œæ›´è¯¦ç»†çš„æ¼”ç¤ºï¼ŒåŒ…å«æ›´å¤šç”¨æˆ·å’Œç ”ç©¶æ–¹å‘çš„ç¤ºä¾‹ã€‚

### æ–¹æ³•3ï¼šç¼–ç¨‹æ–¹å¼ä½¿ç”¨

```python
from category_matcher import CategoryMatcher, MultiUserDataManager

# åˆå§‹åŒ–
matcher = CategoryMatcher(model, base_url, api_key)
data_manager = MultiUserDataManager("output.json")

# å¤„ç†ç”¨æˆ·æ•°æ®
user_input = "ç ”ç©¶æ–¹å‘æè¿°"
top_matches = matcher.match_categories(user_input, top_n=5)

# ä¿å­˜ç»“æœ
for category_id, category_name, score in top_matches:
    data_manager.add_user_result(
        username="ç”¨æˆ·å",
        category_id=category_id,
        user_input=user_input,
        score=score
    )

# ä¿å­˜åˆ°æ–‡ä»¶
data_manager.save_to_json()
```

## ğŸ“ˆ ç¤ºä¾‹è¾“å‡º

è¿è¡Œç¨‹åºåï¼Œä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š

```
=== å¼€å§‹å¤„ç†å¤šç”¨æˆ·åˆ†ç±»åŒ¹é… ===

å¤„ç†ç”¨æˆ·: å¼ ä¸‰
ç ”ç©¶æ–¹å‘: æˆ‘çš„ç ”ç©¶æ–¹å‘æ˜¯åœ°çƒç‰©ç†å­¦ï¼Œä¸»è¦æ˜¯ç ”ç©¶åœ°çƒçš„è¿åŠ¨å’Œå˜åŒ–...
å¼€å§‹åŒ¹é…åˆ†ç±»...

=== å¼ ä¸‰ çš„åŒ¹é…ç»“æœ ===
1. astro-ph.HE - High Energy Astrophysical Phenomena (è¯„åˆ†: 92)
2. math.MP - Mathematical Physics (è¯„åˆ†: 76)
3. astro-ph.CO - Cosmology and Nongalactic Astrophysics (è¯„åˆ†: 76)

=== Tokenä½¿ç”¨ç»Ÿè®¡ ===
è¾“å…¥Token: 270,273
è¾“å‡ºToken: 908
æ€»Token: 271,181

=== è´¹ç”¨è®¡ç®— (é€šä¹‰åƒé—®Pluså®šä»·) ===
æ€»è´¹ç”¨: Â¥2.1803
æ€»è´¹ç”¨: $0.2987 (æŒ‰æ±‡ç‡7.3è®¡ç®—)

=== æ•°æ®ä¿å­˜å®Œæˆ ===
æ–‡ä»¶è·¯å¾„: C:\Users\admin\Desktop\arxiv_recommender_v2\task1\user_categories.json
è®°å½•æ•°é‡: 20
```

## ğŸ”§ é…ç½®è¦æ±‚

ç¡®ä¿ `.env` æ–‡ä»¶åŒ…å«ä»¥ä¸‹é…ç½®ï¼š

```env
DASHSCOPE_API_KEY=your_api_key_here
QWEN_MODEL=qwen-plus
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
```

## ğŸ“ æ•°æ®ç‰¹ç‚¹

1. **å¤šç”¨æˆ·æ”¯æŒ**ï¼šåŒä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªç ”ç©¶æ–¹å‘
2. **å”¯ä¸€ç”¨æˆ·å**ï¼šé€šè¿‡ç”¨æˆ·ååŒºåˆ†ä¸åŒç”¨æˆ·
3. **é‡å¤ç”¨æˆ·å**ï¼šåŒä¸€ç”¨æˆ·åå¯ä»¥å¯¹åº”å¤šä¸ªç ”ç©¶æ–¹å‘
4. **å®Œæ•´è®°å½•**ï¼šæ¯æ¡è®°å½•åŒ…å«ç”¨æˆ·åã€åˆ†ç±»IDã€è¾“å…¥æè¿°ã€è¯„åˆ†å’Œæ—¶é—´æˆ³
5. **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒå¢é‡æ·»åŠ æ–°çš„ç”¨æˆ·æ•°æ®

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

- **ç ”ç©¶æœºæ„**ï¼šç®¡ç†å¤šä¸ªç ”ç©¶å‘˜çš„ç ”ç©¶æ–¹å‘åˆ†ç±»
- **å­¦æœ¯å¹³å°**ï¼šä¸ºç”¨æˆ·æ¨èç›¸å…³çš„ArXivåˆ†ç±»
- **æ•°æ®åˆ†æ**ï¼šåˆ†æç”¨æˆ·ç ”ç©¶å…´è¶£çš„åˆ†å¸ƒæƒ…å†µ
- **ä¸ªäººç®¡ç†**ï¼šè·Ÿè¸ªä¸ªäººå¤šä¸ªç ”ç©¶æ–¹å‘çš„åˆ†ç±»åŒ¹é…

## ğŸ” æ–‡ä»¶è¯´æ˜

- `category_matcher.py`: ä¸»ç¨‹åºæ–‡ä»¶ï¼ŒåŒ…å«CategoryMatcherå’ŒMultiUserDataManagerç±»
- `multi_user_demo.py`: æ¼”ç¤ºç¨‹åºï¼Œå±•ç¤ºå¤šç”¨æˆ·å¤„ç†æµç¨‹
- `user_categories.json`: è¾“å‡ºçš„JSONç»“æœæ–‡ä»¶
- `MULTI_USER_README.md`: æœ¬è¯´æ˜æ–‡ä»¶

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **APIè´¹ç”¨**ï¼šæ¯æ¬¡è¿è¡Œä¼šæ¶ˆè€—API tokenï¼Œè¯·æ³¨æ„è´¹ç”¨æ§åˆ¶
2. **å¤„ç†æ—¶é—´**ï¼šå¤„ç†å¤šä¸ªç”¨æˆ·å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
3. **æ–‡ä»¶è¦†ç›–**ï¼šé‡å¤è¿è¡Œä¼šè¦†ç›–ç°æœ‰çš„JSONæ–‡ä»¶
4. **æ•°æ®å¤‡ä»½**ï¼šå»ºè®®å®šæœŸå¤‡ä»½é‡è¦çš„ç»“æœæ–‡ä»¶
